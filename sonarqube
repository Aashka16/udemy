pipeline {
   agent any

   stages {
      stage('maven build') {
         steps {
             script{
             def maven= tool 'M2_HOME'
             sh """
                echo $maven
                cd webapp;$maven/bin/mvn clean test package
             """
             }
         }
      }
	  
	  stage('Code Quality') {
                   steps {
                       script {
                          def scannerHome = tool 'sonar_scanner';
                          withSonarQubeEnv("SonarQube_server") {
                          sh "${tool("sonar_scanner")}/bin/sonar-scanner"
                                       }
                               }
                           }
                        }
